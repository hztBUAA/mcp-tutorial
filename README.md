# MCPç«¯åˆ°ç«¯æ•™ç¨‹ | ä»å¼€å‘è€…è§’åº¦æ¥ç†è§£å®ƒ

[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)
[![Python Version](https://img.shields.io/badge/Python-3.11%2B-blue.svg)](https://www.python.org/downloads/)
[![Build Status](https://img.shields.io/badge/Build-Passing-brightgreen.svg)](https://github.com/hztBUAA/mcp-tutorial/actions)
[![Documentation](https://img.shields.io/badge/Docs-Latest-blue.svg)](https://github.com/hztBUAA/mcp-tutorial/blob/master/MCP_GUIDE.md)
[![Issues](https://img.shields.io/github/issues/hztBUAA/mcp-tutorial.svg)](https://github.com/hztBUAA/mcp-tutorial/issues)

## ğŸ“– é¡¹ç›®ç®€ä»‹

æœ¬é¡¹ç›®å®ç°äº†ä¸€ä¸ªåŸºäº **MCP (Model Context Protocol)** åè®®çš„å®Œæ•´é¡¹ç›®ï¼ŒåŒ…å«å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯çš„ç«¯åˆ°ç«¯å®ç°ã€‚å°† **Bohrium OpenAPI** å°è£…ä¸ºæ ‡å‡†åŒ–çš„å·¥å…·é›†ï¼Œä½¿å¤§å‹è¯­è¨€æ¨¡å‹èƒ½å¤Ÿè‡ªç„¶åœ°è°ƒç”¨è¿™äº› API èƒ½åŠ›ã€‚MCP åè®®æ˜¯ä¸€ç§ä¸“ä¸ºå¤§æ¨¡å‹è®¾è®¡çš„ä¸Šä¸‹æ–‡å¢å¼ºåè®®ï¼Œé€šè¿‡æ ‡å‡†åŒ–çš„å·¥å…·å‘ç°å’Œè°ƒç”¨æœºåˆ¶ï¼Œæ˜¾è‘—æå‡äº†å¤§æ¨¡å‹çš„å¤–éƒ¨å·¥å…·ä½¿ç”¨èƒ½åŠ›ã€‚

âœ¨ **æ ¸å¿ƒç‰¹æ€§** âœ¨
- å°† HTTP API è½¬æ¢ä¸ºå¤§æ¨¡å‹å¯ç›´æ¥è°ƒç”¨çš„å·¥å…·
- æ”¯æŒ SSE å’Œ stdio ä¸¤ç§ä¼ è¾“å±‚å®ç°
- æä¾›æ ‡å‡†åŒ–çš„å·¥å…·å‘ç°å’Œè°ƒç”¨æœºåˆ¶
- å®ç° ReAct æ¨ç†æ¡†æ¶è¿›è¡Œè¿­ä»£æ€è€ƒ

---

## ğŸš€ æ ¸å¿ƒç»„ä»¶

æœ¬é¡¹ç›®åŒ…å«ä¸‰ä¸ªæ ¸å¿ƒç»„ä»¶ï¼Œå…±åŒæ„æˆå®Œæ•´çš„ MCP ç”Ÿæ€ç³»ç»Ÿï¼š

- **MCP Server** (`src/openapi_mcp_server/`)ï¼š
  - åè®®çš„æœåŠ¡ç«¯å®ç°ï¼Œå°è£… Bohrium OpenAPI ä¸ºæ ‡å‡†åŒ–å·¥å…·
  - æä¾›äº†ä¸°å¯Œçš„å­¦æœ¯å·¥å…·é›†ï¼ŒåŒ…æ‹¬ï¼š
    - è®ºæ–‡æœç´¢ï¼ˆæ™®é€šç‰ˆã€åŠ å¼ºç‰ˆã€Proç‰ˆï¼‰
    - å­¦è€…ä¿¡æ¯æŸ¥è¯¢
    - çŸ¥è¯†åº“ç®¡ç†
  - éœ€è¦ Bohrium OpenAPI å¯†é’¥è¿›è¡Œè®¤è¯
  - æ”¯æŒ SSE ä¼ è¾“æ–¹å¼

- **MCP Host** (`src/mcp_host/`)ï¼š
  - é›†æˆäº† MCP Client ä¸ LLM çš„æ¡¥æ¥å±‚
  - å†…éƒ¨åŒ…å«ï¼š
    - MCP Clientï¼šä¸ Server å»ºç«‹ 1:1 è¿æ¥ï¼Œå¤„ç†ä¼šè¯è¯·æ±‚å’Œå“åº”
    - LLM é›†æˆï¼šæ”¯æŒ Azure OpenAI æˆ– Mock å®ç°
  - æ”¯æŒä¸¤ç§è¿è¡Œæ¨¡å¼ï¼š
    1. Mock æ¨¡å¼ï¼šä½¿ç”¨å†…ç½®çš„æ¨¡æ‹Ÿå“åº”ï¼Œé€‚åˆå¼€å‘æµ‹è¯•
    2. Azure OpenAI æ¨¡å¼ï¼šè¿æ¥çœŸå®çš„ GPT æ¨¡å‹ï¼Œç”¨äºç”Ÿäº§ç¯å¢ƒ
  - å®ç°äº† ReAct æ¨ç†æ¡†æ¶ï¼Œèƒ½å¤Ÿè¿­ä»£è°ƒç”¨å·¥å…·è§£å†³å¤æ‚é—®é¢˜

- **å‘½ä»¤è¡Œå·¥å…·** (`src/cli/`)ï¼š
  - ä½œä¸ºç”¨æˆ·äº¤äº’çš„å…¥å£
  - å®ä¾‹åŒ–å¹¶ç®¡ç† MCP Host
  - æä¾›å‘½ä»¤è¡Œç•Œé¢ï¼Œæ”¯æŒï¼š
    - å•æ¬¡æŸ¥è¯¢æ¨¡å¼
    - äº¤äº’å¼ä¼šè¯æ¨¡å¼
  - è´Ÿè´£ç»“æœçš„æ ¼å¼åŒ–å±•ç¤º

è¿™ä¸‰ä¸ªç»„ä»¶çš„å·¥ä½œæµç¨‹ï¼š
1. MCP Server å¯åŠ¨å¹¶æš´éœ²æ ‡å‡†åŒ–çš„å·¥å…·æ¥å£
2. MCP Host ä¸­çš„ Client ä¸ Server å»ºç«‹è¿æ¥ï¼Œè·å–å¯ç”¨å·¥å…·åˆ—è¡¨
3. å‘½ä»¤è¡Œå·¥å…·æ¥æ”¶ç”¨æˆ·è¾“å…¥ï¼Œä¼ é€’ç»™ Host å¤„ç†
4. Host ä½¿ç”¨ LLM åˆ†æè¯·æ±‚ï¼Œé€šè¿‡å†…éƒ¨çš„ Client è°ƒç”¨ Server æä¾›çš„å·¥å…·
5. ç»“æœé€šè¿‡å‘½ä»¤è¡Œç•Œé¢è¿”å›ç»™ç”¨æˆ·

---

---

## âš™ï¸ ç³»ç»Ÿè¦æ±‚

- **Python**ï¼š3.11 æˆ–æ›´é«˜ç‰ˆæœ¬

- **Bohrium OpenAPI å¯†é’¥**ï¼ˆå¿…éœ€ï¼‰ï¼š
  1. è®¿é—® [Bohrium å®˜ç½‘](https://bohrium.com)
  2. æ³¨å†Œå¹¶ç™»å½•è´¦æˆ·
  3. è¿›å…¥"ä¸ªäººè®¾ç½®" > "API å¯†é’¥"
  4. åˆ›å»ºæ–°çš„è®¿é—®å¯†é’¥
  > âš ï¸ æ³¨æ„ï¼šæ— è®ºæ˜¯å¼€å‘æµ‹è¯•è¿˜æ˜¯ç”Ÿäº§ç¯å¢ƒï¼Œéƒ½éœ€è¦é…ç½® Bohrium API å¯†é’¥æ¥å¯åŠ¨MCP Serverã€‚ åç»­ä¼šå¼€å‘serverçš„mockç‰ˆæœ¬ã€‚

- **Azure OpenAI API å¯†é’¥**ï¼ˆå¯é€‰ï¼‰ï¼š
  - å¼€å‘æµ‹è¯•ç¯å¢ƒï¼š
    - å¯ä»¥ä½¿ç”¨ Mock æ¨¡å¼ï¼Œæ— éœ€ Azure OpenAI API å¯†é’¥
  
  - ç”Ÿäº§ç¯å¢ƒï¼š
    1. è®¿é—® [Azure Portal](https://portal.azure.com)
    2. åˆ›å»º Azure OpenAI æœåŠ¡å®ä¾‹
    3. åœ¨"å¯†é’¥å’Œç»ˆç»“ç‚¹"è·å– API å¯†é’¥å’Œç»ˆç»“ç‚¹

- **Python ä¾èµ–**ï¼šæ‰€æœ‰ä¾èµ–åœ¨ `pyproject.toml` ä¸­ç®¡ç†ï¼ŒæŒ‰ç…§å®‰è£…æ­¥éª¤æ“ä½œå³å¯

---

## ğŸ› ï¸ å®‰è£…æ­¥éª¤

> ğŸ’¡ å¿«é€Ÿå¼€å§‹æç¤ºï¼š
> - å¿…é¡»é…ç½® Bohrium API å¯†é’¥ä»¥ä½¿ç”¨ MCP Server
> - å¯ä»¥ä½¿ç”¨ Mock æ¨¡å¼ï¼ˆæ— éœ€ Azure OpenAI å¯†é’¥ï¼‰å¿«é€Ÿå¼€å§‹
> - ç”Ÿäº§ç¯å¢ƒå»ºè®®ä½¿ç”¨ Azure OpenAI æ¨¡å¼è·å¾—æ›´å¥½çš„æ•ˆæœ

1. **å…‹éš†ä»“åº“**ï¼š
   ```bash
   git clone https://github.com/hztBUAA/mcp-tutorial.git
   cd mcp-tutorial
   ```

2. **åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ**ï¼š
   ```bash
   # æ¨èä½¿ç”¨ condaï¼ˆéœ€è¦ Python >= 3.11ï¼‰
   conda create -n mcp_env python=3.11 -y
   conda activate mcp_env

   # æˆ–ä½¿ç”¨ venv
   python -m venv venv
   source venv/bin/activate  # Linux/macOS
   .\venv\Scripts\activate   # Windows
   ```

3. **å®‰è£…é¡¹ç›®**ï¼š
   ```bash
   # æ™®é€šç”¨æˆ·å®‰è£…
   pip install .
   
   # å¼€å‘è€…å®‰è£…ï¼ˆæºç å¯ç¼–è¾‘æ¨¡å¼ï¼‰
   pip install -e .

   # å¦‚æœéœ€è¦å¼€å‘ç¯å¢ƒï¼ˆåŒ…å« jupyter æ”¯æŒç­‰ï¼‰
   pip install -e ".[dev]"

   # å¦‚æœéœ€è¦æµ‹è¯•å·¥å…·
   pip install -e ".[test]"
   ```

   > ğŸ’¡ è¯´æ˜ï¼š
   > - æ™®é€šç”¨æˆ·ä½¿ç”¨ `pip install .` å³å¯ï¼Œè¿™ä¼šæ ¹æ®é¡¹ç›®æ ¹ç›®å½•çš„pyproject.tomlæ–‡ä»¶å®‰è£…ä¸€ä¸ªç¨³å®šç‰ˆæœ¬
   > - å¼€å‘è€…ä½¿ç”¨ `-e` å‚æ•°å®‰è£…ï¼Œè¿™æ ·ä¿®æ”¹æºç åä¸éœ€è¦é‡æ–°å®‰è£…
   > - æ‰€æœ‰ä¾èµ–éƒ½åœ¨ `pyproject.toml` ä¸­ç®¡ç†ï¼Œæ— éœ€æ‰‹åŠ¨å®‰è£…å…¶ä»–ä¾èµ–

4. **ç¯å¢ƒé…ç½®**ï¼š
   ```bash
   # åˆ›å»º .env æ–‡ä»¶
   cp .env.example .env
   ```

   é€‰æ‹©ä»¥ä¸‹é…ç½®æ–¹å¼ä¹‹ä¸€ï¼š

   A. ä½¿ç”¨ Mock æ¨¡å¼ï¼ˆå¿«é€Ÿä¸Šæ‰‹ï¼‰ï¼š
   ```bash
   # åœ¨ .env ä¸­è®¾ç½®
   MOCK=True
   ```
   è¿™ç§æ¨¡å¼ä¸éœ€è¦ API å¯†é’¥ï¼Œè€Œæ˜¯ä½¿ç”¨æœ¬é¡¹ç›®å¼€å‘çš„æ¨¡æ‹ŸOpenaiç±»ï¼Œé€‚åˆå¿«é€Ÿä½“éªŒå’Œå¼€å‘æµ‹è¯•ã€‚

   B. ç”Ÿäº§ç¯å¢ƒï¼š
   ```bash
   # Azure OpenAI é…ç½®
   MOCK=False  # æˆ–åˆ é™¤æ­¤è¡Œ
   AZURE_OPENAI_API_KEY=your_api_key
   AZURE_OPENAI_ENDPOINT=your_endpoint
   ```

   > ğŸ’¡ æç¤ºï¼š
   > - å¼€å‘å’Œæµ‹è¯•æ—¶æ¨èä½¿ç”¨ Mock æ¨¡å¼ï¼Œæ— éœ€é…ç½® API å¯†é’¥
   > - Mock æ¨¡å¼æä¾›æ¨¡æ‹Ÿå“åº”ï¼Œå¯ä»¥å¸®åŠ©æ‚¨å¿«é€Ÿç†è§£ç³»ç»Ÿå·¥ä½œæ–¹å¼
   > - ç”Ÿäº§ç¯å¢ƒè¯·ä½¿ç”¨å®é™…çš„ Azure OpenAI é…ç½®

5. **éªŒè¯å®‰è£…**ï¼š
   ```bash
   # æµ‹è¯•å¯¼å…¥æ˜¯å¦æ­£å¸¸
   python -c "from openapi_mcp_server import __version__; print(__version__)"
   python -c "from cli import __version__; print(__version__)"
   python -c "from mcp_host import __version__; print(__version__)"
   ```

## å¸¸è§é—®é¢˜

1. å¦‚æœé‡åˆ° "ModuleNotFoundError" é”™è¯¯ï¼š
   - æ£€æŸ¥æ˜¯å¦åœ¨ç”¨æ­£ç¡®çš„condaç¯å¢ƒï¼Œå› ä¸ºæ–°å¼€çš„ç»ˆç«¯ä¼šé‡ç½®ä¸ºbaseçš„condaç¯å¢ƒï¼Œéœ€è¦é‡æ–°`conda activate mcp_env`ã€‚
   - è¿™è¯´æ˜åŒ…æˆ–å…¶ä¾èµ–æ²¡æœ‰æ­£ç¡®å®‰è£…
   - ç¡®ä¿æ‰§è¡Œäº† `pip install .` å‘½ä»¤ï¼ˆæ™®é€šç”¨æˆ·ï¼‰æˆ– `pip install -e .`ï¼ˆå¼€å‘è€…ï¼‰
   - æ£€æŸ¥ Python ç‰ˆæœ¬æ˜¯å¦ >= 3.11

2. å¦‚æœé‡åˆ°ä¾èµ–å†²çªï¼š
   ```bash
   # æ¸…ç†ç¯å¢ƒ
   pip uninstall -y -r <(pip freeze)
   # é‡æ–°å®‰è£…
   pip install .  # æ™®é€šç”¨æˆ·
   # æˆ–
   pip install -e .  # å¼€å‘è€…
   ```


---

## ğŸš€ ä½¿ç”¨æ–¹æ³•

### å¯åŠ¨ MCP æœåŠ¡å™¨

```bash
# ä½¿ç”¨é»˜è®¤é…ç½®å¯åŠ¨æœåŠ¡å™¨
python start_server.py

```

### ä½¿ç”¨ MCP å®¢æˆ·ç«¯

#### å•æ¬¡æŸ¥è¯¢æ¨¡å¼
```bash
# ä½¿ç”¨ SSE ä¼ è¾“ï¼ˆé»˜è®¤ï¼‰
python mcp_demo.py "æŸ¥æ‰¾å…³äºé‡å­è®¡ç®—çš„æœ€æ–°è®ºæ–‡"

# ä½¿ç”¨ stdio ä¼ è¾“  æœªæµ‹è¯•ï¼Œç”±äºæœåŠ¡å™¨ç›®å‰ä»…æ”¯æŒsse
# MCP_TRANSPORT=stdio python mcp_demo.py "æŸ¥æ‰¾å…³äºé‡å­è®¡ç®—çš„æœ€æ–°è®ºæ–‡"
```

#### äº¤äº’å¼æ¨¡å¼

```bash
# å¯åŠ¨äº¤äº’å¼ä¼šè¯
python mcp_demo.py --interactive
```

---

## ğŸ“Š ç¤ºä¾‹è¿è¡Œ

ä»¥ä¸‹æ˜¯ä½¿ç”¨ MCP ç³»ç»Ÿè¿›è¡Œè®ºæ–‡æœç´¢çš„å®é™…è¿è¡Œç¤ºä¾‹ï¼Œå±•ç¤ºäº†ç³»ç»Ÿå¦‚ä½•ä½¿ç”¨ ReAct é£æ ¼è¿›è¡Œæ¨ç†ï¼š

### æŸ¥è¯¢ç¤ºä¾‹ï¼šæŸ¥æ‰¾æœºå™¨å­¦ä¹ ç›¸å…³è®ºæ–‡

**ç”¨æˆ·æŸ¥è¯¢**ï¼š`Find papers about machine learning`

**ç³»ç»Ÿæ€è€ƒè¿‡ç¨‹**ï¼š

![image](https://github.com/user-attachments/assets/0d91fd8b-2335-4d74-93ad-b76e6cc815a3)


ç³»ç»Ÿé¦–å…ˆåˆ†ææŸ¥è¯¢ï¼Œç¡®å®šéœ€è¦ä½¿ç”¨å¢å¼ºå‹è®ºæ–‡æœç´¢å·¥å…·ï¼Œå¹¶æ„å»ºé€‚å½“çš„æŸ¥è¯¢å‚æ•°ã€‚

**å·¥å…·è°ƒç”¨ä¸ç»“æœ**ï¼š

![image](https://github.com/user-attachments/assets/19bc495c-65f3-4bae-a6e3-2f7ff23dd6e0)


ç³»ç»Ÿè°ƒç”¨ `search_papers_enhanced` å·¥å…·ï¼Œè·å–ç›¸å…³è®ºæ–‡åˆ—è¡¨ï¼Œå¹¶å¯¹ç»“æœè¿›è¡Œåˆ†æï¼Œæå–å…³é”®ä¿¡æ¯å¦‚ä¸»é¢˜åˆ†å¸ƒã€å…ƒæ•°æ®ç‰¹å¾å’Œå¯ç”¨æ€§ã€‚

**æœ€ç»ˆå›ç­”**ï¼š
![image](https://github.com/user-attachments/assets/137a5193-92cc-4732-a921-c64b9462626a)
![image](https://github.com/user-attachments/assets/a62f278c-d921-4a20-a175-8d89591cefa7)


ç³»ç»Ÿç”Ÿæˆç»“æ„åŒ–çš„æœ€ç»ˆå›ç­”ï¼ŒåŒ…æ‹¬ç²¾é€‰çš„è®ºæ–‡åˆ—è¡¨ï¼Œæ¯ç¯‡è®ºæ–‡åŒ…å«æ ‡é¢˜ã€ä½œè€…ã€DOI é“¾æ¥ç­‰å…³é”®ä¿¡æ¯ï¼Œæ¶µç›–æœºå™¨å­¦ä¹ çš„å¤šä¸ªæ–¹é¢ã€‚

è¿™ä¸ªç¤ºä¾‹å±•ç¤ºäº† MCP ç³»ç»Ÿå¦‚ä½•ï¼š
1. ç†è§£ç”¨æˆ·æ„å›¾å¹¶è§„åˆ’æŸ¥è¯¢ç­–ç•¥
2. è°ƒç”¨é€‚å½“çš„å·¥å…·å¹¶å¤„ç†è¿”å›ç»“æœ
3. åˆ†æå’Œç»¼åˆä¿¡æ¯ï¼Œç”Ÿæˆæœ‰æ¡ç†çš„å›ç­”
4. åœ¨æ•´ä¸ªè¿‡ç¨‹ä¸­ä¿æŒé€æ˜çš„æ¨ç†é“¾

---

## ğŸ—ï¸ ä»£ç ç»“æ„

```
mcp-tutorial/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ mcp_client/         # MCP å®¢æˆ·ç«¯å®ç°
â”‚   â”‚   â””â”€â”€ cli_client.py   # å‘½ä»¤è¡Œå®¢æˆ·ç«¯
â”‚   â”œâ”€â”€ mcp_host/           # MCP ä¸»æœºå®ç°
â”‚   â”‚   â”œâ”€â”€ azure_openai_host.py  # Azure OpenAI é›†æˆ
â”‚   â”‚   â””â”€â”€ prompts.py      # ç³»ç»Ÿæç¤ºæ¨¡æ¿
â”‚   â””â”€â”€ openapi_mcp_server/ # MCP æœåŠ¡å™¨å®ç°
â”‚       â”œâ”€â”€ server.py       # æ ¸å¿ƒæœåŠ¡å™¨é€»è¾‘
â”‚       â”œâ”€â”€ scholar/        # å­¦è€… API æ¨¡å—
â”‚       â”œâ”€â”€ paper/          # è®ºæ–‡ API æ¨¡å—
â”‚       â””â”€â”€ knowledge/      # çŸ¥è¯†åº“ API æ¨¡å—
â”œâ”€â”€ mcp_demo.py             # æ¼”ç¤ºè„šæœ¬
â”œâ”€â”€ MCP_GUIDE.md            # MCP å¼€å‘æŒ‡å—
â”œâ”€â”€ GUIDE.md                # API æ¨¡å—å¼€å‘æŒ‡å—
â”œâ”€â”€ requirements.txt        # é¡¹ç›®ä¾èµ–
â””â”€â”€ README.md               # é¡¹ç›®è¯´æ˜
```

---

## ğŸ’¡ MCP åè®®æ ¸å¿ƒæ¦‚å¿µ

### å·¥å…· (Tools)

å·¥å…·æ˜¯æœåŠ¡å™¨æä¾›çš„å¯æ‰§è¡ŒåŠŸèƒ½ï¼Œå…è®¸å¤§æ¨¡å‹æ‰§è¡Œæ“ä½œã€‚æ¯ä¸ªå·¥å…·éƒ½æœ‰ï¼š
- åç§°ï¼ˆå¦‚ `search-papers`ï¼‰
- æè¿°ï¼ˆå¦‚ "æœç´¢ç›¸å…³è®ºæ–‡"ï¼‰
- è¾“å…¥æ¨¡å¼ï¼ˆJSON Schema æ ¼å¼ï¼‰
- è¾“å‡ºç±»å‹ï¼ˆæ–‡æœ¬ã€å›¾åƒç­‰ï¼‰

### èµ„æº (Resources)

èµ„æºæ˜¯æœåŠ¡å™¨æä¾›çš„æ•°æ®æˆ–å†…å®¹ï¼Œå¯ä»¥è¢«å¤§æ¨¡å‹è®¿é—®ã€‚èµ„æºæœ‰ï¼š
- URIï¼ˆå¦‚ `tables://analytics`ï¼‰
- å†…å®¹ç±»å‹
- å†…å®¹

### æç¤º (Prompts)

æç¤ºæ˜¯å¯é‡ç”¨çš„æ¨¡æ¿ï¼Œå¯ä»¥ä¸ç‰¹å®šè¾“å…¥ä¸€èµ·ä½¿ç”¨æ¥ç”Ÿæˆå¤§æ¨¡å‹çš„è¾“å…¥ã€‚

---

## ğŸ”„ ä¼ è¾“å±‚å®ç°

MCP åè®®æ”¯æŒä¸¤ç§ä¸»è¦çš„ä¼ è¾“å±‚å®ç°ï¼š

### SSE (Server-Sent Events)

é€‚ç”¨äºç½‘ç»œç¯å¢ƒï¼Œé€šè¿‡ HTTP é•¿è¿æ¥å®ç°æœåŠ¡å™¨å‘å®¢æˆ·ç«¯çš„å•å‘é€šä¿¡ã€‚

```python
# æœåŠ¡å™¨ç«¯
@app.route("/sse")
async def handle_sse(request):
    async with sse.connect_sse(request.scope, request.receive, request._send) as streams:
        await server.run(streams[0], streams[1])

# å®¢æˆ·ç«¯
async with sse_client(server_url) as streams:
    async with ClientSession(*streams) as session:
        # ä½¿ç”¨ session è¿›è¡Œé€šä¿¡
```

### stdio (æ ‡å‡†è¾“å…¥/è¾“å‡º)

é€‚ç”¨äºæœ¬åœ°ç¯å¢ƒï¼Œé€šè¿‡æ ‡å‡†è¾“å…¥/è¾“å‡ºæµè¿›è¡Œé€šä¿¡ã€‚

```python
# æœåŠ¡å™¨ç«¯
async def main():
    await stdio_server(server)

# å®¢æˆ·ç«¯
async with stdio_client(server_command) as streams:
    async with ClientSession(*streams) as session:
        # ä½¿ç”¨ session è¿›è¡Œé€šä¿¡
```

---

## ğŸ“Š Bohrium OpenAPI èƒ½åŠ›

æœ¬é¡¹ç›®å°è£…äº† Bohrium OpenAPI çš„å¤šç§èƒ½åŠ›ï¼ŒåŒ…æ‹¬ï¼š

### å­¦è€…ç›¸å…³ API
- å­¦è€…ä¸ªäººä¿¡æ¯æŸ¥è¯¢
- å­¦è€…åˆä½œä½œè€…å…³ç³»
- å­¦è€…è®ºæ–‡åˆ—è¡¨
- å…³æ³¨ä¸è®¢é˜…åˆ—è¡¨

### è®ºæ–‡æœç´¢å¼•æ“
- æ™®é€šç‰ˆæœç´¢
- åŠ å¼ºç‰ˆæœç´¢
- è¯­æ–™ Pro ç‰ˆæœ¬

### è§£æä¸è¯†åˆ«
- PDF æ–‡ä»¶è§£æ
- å›¾ç‰‡è¯†åˆ«
- æ ¼å¼åŒ–è¾“å‡º

### ä»»åŠ¡ç®¡ç†
- ä»»åŠ¡åˆ›å»ºä¸æäº¤
- ä»»åŠ¡çŠ¶æ€æŸ¥è¯¢
- ä»»åŠ¡ç»„ç®¡ç†

...and so on~
---

## ğŸ” REST API vs MCPï¼šä¸ºä»€ä¹ˆéœ€è¦ MCPï¼Ÿ

### REST API çš„å±€é™

REST API åœ¨ä¼ ç»Ÿ Web åº”ç”¨ä¸­è¡¨ç°å‡ºè‰²ï¼Œä½†åœ¨å¤§æ¨¡å‹åº”ç”¨åœºæ™¯ä¸­å­˜åœ¨ä¸€äº›å±€é™ï¼š

1. **ç¼ºä¹è‡ªæè¿°èƒ½åŠ›**ï¼šREST API é€šå¸¸éœ€è¦é¢å¤–çš„æ–‡æ¡£æ¥æè¿°å…¶åŠŸèƒ½å’Œå‚æ•°
2. **ç¼ºä¹æ ‡å‡†åŒ–çš„å‘ç°æœºåˆ¶**ï¼šå®¢æˆ·ç«¯éš¾ä»¥è‡ªåŠ¨å‘ç°å¯ç”¨çš„ API ç«¯ç‚¹
3. **ä¸é€‚åˆå¤æ‚äº¤äº’**ï¼šæ— æ³•è‡ªç„¶åœ°æ”¯æŒå¤šè½®å¯¹è¯å’Œä¸Šä¸‹æ–‡ä¿æŒ

### MCP çš„ä¼˜åŠ¿

MCP åè®®ä¸“ä¸ºå¤§æ¨¡å‹è®¾è®¡ï¼Œå…·æœ‰ä»¥ä¸‹ä¼˜åŠ¿ï¼š

1. **æ ‡å‡†åŒ–çš„å·¥å…·å‘ç°**ï¼šå¤§æ¨¡å‹å¯ä»¥è‡ªåŠ¨å‘ç°å¯ç”¨çš„å·¥å…·å’Œèµ„æº
2. **è‡ªæè¿°çš„è¾“å…¥æ¨¡å¼**ï¼šå·¥å…·å®šä¹‰åŒ…å«å®Œæ•´çš„å‚æ•°æè¿°å’Œç±»å‹ä¿¡æ¯
3. **ç»Ÿä¸€çš„å†…å®¹è¡¨ç¤º**ï¼šæ ‡å‡†åŒ–çš„å“åº”æ ¼å¼ä¾¿äºå¤§æ¨¡å‹å¤„ç†
4. **é€‚åˆå¤§æ¨¡å‹äº¤äº’**ï¼šè®¾è®¡ç†å¿µä¸å¤§æ¨¡å‹çš„å·¥å…·è°ƒç”¨æœºåˆ¶å¤©ç„¶å¥‘åˆ

---

## ğŸ”® æœªæ¥æ”¹è¿›æ–¹å‘

1. **æ›´å¤š APIå’ŒTOOLæ¨¡å—æ”¯æŒ**ï¼šæ‰©å±•å¯¹æ›´å¤š Bohrium OpenAPI æ¨¡å—å’Œå·¥å…·çš„æ”¯æŒï¼ŒåŒ…æ‹¬RAGã€Websearchä»¥åŠCodeExecuteç­‰ç­‰
2. **å¤šæ¨¡å‹æ”¯æŒ**ï¼šæ‰©å±•å¯¹æ›´å¤šå¤§æ¨¡å‹çš„æ”¯æŒï¼ˆå¦‚ Claudeã€GLM ç­‰ï¼‰
3. **å®‰å…¨å¢å¼º**ï¼šå®ç°æ›´å®Œå–„çš„è®¤è¯å’Œæˆæƒæœºåˆ¶
4. **ç›‘æ§ä¸æ—¥å¿—**ï¼šæ·»åŠ è¯¦ç»†çš„ç›‘æ§å’Œæ—¥å¿—è®°å½•åŠŸèƒ½
---

## ğŸ“š å‚è€ƒèµ„æº

- [MCP å®˜æ–¹æ–‡æ¡£](https://modelcontextprotocol.io/)
- [OpenAI Function Calling æ–‡æ¡£](https://platform.openai.com/docs/guides/function-calling)
- [MCP åè®®è®¨è®º](https://github.com/orgs/modelcontextprotocol/discussions/209)
- [OpenAI Tools & Remote MCP æŒ‡å—](https://platform.openai.com/docs/guides/tools-remote-mcp)
- [MCP vs REST è®¨è®º](https://zhuanlan.zhihu.com/p/29001189476)

---

## ğŸ¤ å¦‚ä½•è´¡çŒ®

æ¬¢è¿ä»»ä½•å½¢å¼çš„è´¡çŒ®ï¼è¯·ï¼š
1. é€šè¿‡ [Issues](https://github.com/hztBUAA/mcp-tutorial/issues) æŠ¥å‘Šé—®é¢˜æˆ–å»ºè®®
2. é€šè¿‡ [Pull Requests](https://github.com/hztBUAA/mcp-tutorial/pulls) æäº¤æ”¹è¿›

---

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ [MIT è®¸å¯è¯](https://opensource.org/licenses/MIT) å¼€æºã€‚
